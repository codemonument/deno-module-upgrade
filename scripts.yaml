
# Config Getting Started Guide: https://velociraptor.run/docs/configuration/
# Complete Config Docs: https://doc.deno.land/https://deno.land/x/velociraptor@1.5.0/src/scripts_config.ts
# IMPORTANT: Run some vr command at least once, to install the git hooks! (a simple `vr` is enough)
 
envFile:
 - .env

allow: 
  env: true

scripts:
  start: 
    cmd: deno run main.ts codeup latest
    allow: 
      read: true
      net: true
      run: "deno"
  
  reset: 
    cmd: 
      - deno install -f --name codeup https://deno.land/x/codeup@2.0.0-beta.1/main.ts
      - deno install -f --name dmm --allow-net='cdn.deno.land,api.deno.land,x.nest.land,raw.githubusercontent.com,github.com,api.github.com' --allow-read='deps.ts' --allow-write='deps.ts' https://x.nest.land/dmm@2.1.0/mod.ts
    allow:
      read: true 
      write: true
      run: true

  test: 
    cmd: deno test 
    allow: 
      net: true


  format: deno fmt

  build: vr bundle 

  bundle: deno bundle main.ts dist/${CLI_NAME}.js

  # If needed, adjust
  compile: 
    cmd: "deno compile --target x86_64-pc-windows-msvc -A -o dist/${CLI_NAME} main.ts "

  install: 
    cmd: deno install --name ${CLI_NAME} main.ts 
    allow: 
      read: true
      net: 'deno.land'
      run: 'deno'

  uninstall: deno uninstall --unstable ${CLI_NAME}

    
    

